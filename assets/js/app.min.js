function r(e){/in/.test(document.readyState)?setTimeout("r("+e+")",9):e()}function updateTimer(){var e=((new Date).getTime()-initalTime)/1e3;document.getElementById("ratelimited-time").innerText=parseFloat(e).toFixed(2)}function tweet(){var e=((new Date).getTime()-initalTime)/1e3,t=window.open("https://twitter.com/intent/tweet?url=http%3A%2F%2Ftakeb1nzyto.space&text=I%20got%20ratelimited%20for%20"+parseFloat(e).toFixed(2)+"%20seconds!&related=deansheather1&hashtags=b1nzy,ratelimited","_blank");t.focus(),Logger.info("[Timer] Attempted to open Twitter intent URL in a new tab.")}function render(){backdrop.ctx.clearRect(0,0,backdrop.canvas.width,backdrop.canvas.height);for(var e=0;e<celestials.length;e++)celestials[e].render(backdrop.ctx);requestAnimationFrame(render)}function draw(){function e(){for(var e=0;e<config.initialStarsCount;e++)celestials.push(new Star);for(var e=0;e<config.inititalCelestialBodies;e++)celestials.push(new CelestialBody(n[Math.floor(Math.random()*n.length)]));render(),requestAnimationFrame(render),Logger.info("[Renderer] Rendering started."),Logger.timeEnd("init"),document.documentElement.className=document.documentElement.className.replace(/(?:^|\s)loading(?!\S)/g,""),document.documentElement.className+=" loaded"}if(!window.started){window.started=!0;for(var t=0,n=[],o=0;o<config.celestialBodies.length;o++)n.push(new Image),n[o].onload=function(){++t>=config.celestialBodies.length&&e()},n[o].src=config.cdnBase+"assets/img/"+config.celestialBodies[o]}}function incrementMeew0Mode(){if(config.meew0Mode&&!meew0Mode.blocked){if(meew0Mode.count>4999&&!meew0Mode.askedBlock&&(meew0Mode.askedBlock=!0,Logger.info("[meew0 mode] Asking to ratelimit meew0 mode."),meew0Mode.blocked=!confirm("meew0 mode has a ratelimit set, because b1nzy. ¯\\_(ツ)_/¯ Would you like to disable this ratelimit?"),meew0Mode.blocked))return Logger.info("[meew0 mode] Meew0 mode ratelimited after "+meew0Mode.count+" increments."),meewButton.innerText="meew0 mode ratelimited x"+meew0Mode.count;meew0Mode.count++,meewButton.innerText="meew0 mode x"+meew0Mode.count,config.lightTheme||(document.body.className+="light-theme",config.lightTheme=!0);for(var e=0;e<5;e++)celestials.push(new CelestialBody(eyes))}}function toggleVisualiser(){visualizer.toggled=!visualizer.toggled,renderVisualizer(),Logger.info("[Visualizer] Toggled visualizer to "+(visualizer.toggled?"on":"off")+" state.")}function renderVisualizer(){function e(){if(visualizer.toggled){requestAnimationFrame(e),visualizer.analyser.getByteTimeDomainData(n),backdrop.ctx.lineWidth=2,backdrop.ctx.strokeStyle=config.lightTheme?"#010916":"#fff",backdrop.ctx.beginPath();for(var o=1*backdrop.canvas.width/t,i=0,r=0;r<t;r++){var a=n[r]/128*backdrop.canvas.height/2;backdrop.ctx[0===r?"moveTo":"lineTo"](i,a),i+=o}backdrop.ctx.lineTo(canvas.width,canvas.height/2),backdrop.ctx.stroke()}}var t=visualizer.analyser.frequencyBinCount,n=new Uint8Array(t);e()}!function(e){"use strict";var t={};t.VERSION="1.3.0";var n,o={},i=function(e,t){return function(){return t.apply(e,arguments)}},r=function(){var e,t,n=arguments,o=n[0];for(t=1;t<n.length;t++)for(e in n[t])e in o||!n[t].hasOwnProperty(e)||(o[e]=n[t][e]);return o},a=function(e,t){return{value:e,name:t}};t.DEBUG=a(1,"DEBUG"),t.INFO=a(2,"INFO"),t.TIME=a(3,"TIME"),t.WARN=a(4,"WARN"),t.ERROR=a(8,"ERROR"),t.OFF=a(99,"OFF");var s=function(e){this.context=e,this.setLevel(e.filterLevel),this.log=this.info};s.prototype={setLevel:function(e){e&&"value"in e&&(this.context.filterLevel=e)},enabledFor:function(e){var t=this.context.filterLevel;return e.value>=t.value},debug:function(){this.invoke(t.DEBUG,arguments)},info:function(){this.invoke(t.INFO,arguments)},warn:function(){this.invoke(t.WARN,arguments)},error:function(){this.invoke(t.ERROR,arguments)},time:function(e){"string"==typeof e&&e.length>0&&this.invoke(t.TIME,[e,"start"])},timeEnd:function(e){"string"==typeof e&&e.length>0&&this.invoke(t.TIME,[e,"end"])},invoke:function(e,t){n&&this.enabledFor(e)&&n(t,r({level:e},this.context))}};var c=new s({filterLevel:t.OFF});!function(){var e=t;e.enabledFor=i(c,c.enabledFor),e.debug=i(c,c.debug),e.time=i(c,c.time),e.timeEnd=i(c,c.timeEnd),e.info=i(c,c.info),e.warn=i(c,c.warn),e.error=i(c,c.error),e.log=e.info}(),t.setHandler=function(e){n=e},t.setLevel=function(e){c.setLevel(e);for(var t in o)o.hasOwnProperty(t)&&o[t].setLevel(e)},t.get=function(e){return o[e]||(o[e]=new s(r({name:e},c.context)))},t.createDefaultHandler=function(e){e=e||{},e.formatter=e.formatter||function(e,t){t.name&&e.unshift("["+t.name+"]")};var n={},o=function(e,t){Function.prototype.apply.call(e,console,t)};return"undefined"==typeof console?function(){}:function(i,r){i=Array.prototype.slice.call(i);var a,s=console.log;r.level===t.TIME?(a=(r.name?"["+r.name+"] ":"")+i[0],"start"===i[1]?console.time?console.time(a):n[a]=(new Date).getTime():console.timeEnd?console.timeEnd(a):o(s,[a+": "+((new Date).getTime()-n[a])+"ms"])):(r.level===t.WARN&&console.warn?s=console.warn:r.level===t.ERROR&&console.error?s=console.error:r.level===t.INFO&&console.info&&(s=console.info),e.formatter(i,r),o(s,i))}},t.useDefaults=function(e){t.setLevel(e&&e.defaultLevel||t.DEBUG),t.setHandler(t.createDefaultHandler(e))},"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&module.exports?module.exports=t:(t._prevLogger=e.Logger,t.noConflict=function(){return e.Logger=t._prevLogger,t},e.Logger=t)}(this),!function(e,t,n){function o(e,t){return typeof e===t}function i(){var e,t,n,i,r,a,s;for(var c in y)if(y.hasOwnProperty(c)){if(e=[],t=y[c],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=o(t.fn,"function")?t.fn():t.fn,r=0;r<e.length;r++)a=e[r],s=a.split("."),1===s.length?v[s[0]]=i:(!v[s[0]]||v[s[0]]instanceof Boolean||(v[s[0]]=new Boolean(v[s[0]])),v[s[0]][s[1]]=i),b.push((i?"":"no-")+s.join("-"))}}function r(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):T?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(e,t){return!!~(""+e).indexOf(t)}function s(){var e=t.body;return e||(e=r(T?"svg":"body"),e.fake=!0),e}function c(e,n,o,i){var a,c,l,d,u="modernizr",f=r("div"),m=s();if(parseInt(o,10))for(;o--;)l=r("div"),l.id=i?i[o]:u+(o+1),f.appendChild(l);return a=r("style"),a.type="text/css",a.id="s"+u,(m.fake?m:f).appendChild(a),m.appendChild(f),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),f.id=u,m.fake&&(m.style.background="",m.style.overflow="hidden",d=k.style.overflow,k.style.overflow="hidden",k.appendChild(m)),c=n(f,e),m.fake?(m.parentNode.removeChild(m),k.style.overflow=d,k.offsetHeight):f.parentNode.removeChild(f),!!c}function l(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(t,o){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(l(t[i]),o))return!0;return!1}if("CSSSupportsRule"in e){for(var r=[];i--;)r.push("("+l(t[i])+":"+o+")");return r=r.join(" or "),c("@supports ("+r+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function u(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function f(e,t,i,s){function c(){f&&(delete C.style,delete C.modElem)}if(s=!o(s,"undefined")&&s,!o(i,"undefined")){var l=d(e,i);if(!o(l,"undefined"))return l}for(var f,m,g,p,h,y=["modernizr","tspan"];!C.style;)f=!0,C.modElem=r(y.shift()),C.style=C.modElem.style;for(g=e.length,m=0;g>m;m++)if(p=e[m],h=C.style[p],a(p,"-")&&(p=u(p)),C.style[p]!==n){if(s||o(i,"undefined"))return c(),"pfx"!=t||p;try{C.style[p]=i}catch(w){}if(C.style[p]!=h)return c(),"pfx"!=t||p}return c(),!1}function m(e,t){return function(){return e.apply(t,arguments)}}function g(e,t,n){var i;for(var r in e)if(e[r]in t)return n===!1?e[r]:(i=t[e[r]],o(i,"function")?m(i,n||t):i);return!1}function p(e,t,n,i,r){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+M.join(a+" ")+a).split(" ");return o(t,"string")||o(t,"undefined")?f(s,t,i,r):(s=(e+" "+L.join(a+" ")+a).split(" "),g(s,t,n))}function h(e,t,o){return p(e,n,n,t,o)}var y=[],w={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},v=function(){};v.prototype=w,v=new v;var b=[],k=t.documentElement,T="svg"===k.nodeName.toLowerCase();v.addTest("audio",function(){var e=r("audio"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,""),t.opus=e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}),v.addTest("canvas",function(){var e=r("canvas");return!(!e.getContext||!e.getContext("2d"))});var E="Moz O ms Webkit",M=w._config.usePrefixes?E.split(" "):[];w._cssomPrefixes=M;var x={elem:r("modernizr")};v._q.push(function(){delete x.elem});var C={style:x.elem.style};v._q.unshift(function(){delete C.style});var L=w._config.usePrefixes?E.toLowerCase().split(" "):[];w._domPrefixes=L,w.testAllProps=p;var S=function(t){var o,i=prefixes.length,r=e.CSSRule;if("undefined"==typeof r)return n;if(!t)return!1;if(t=t.replace(/^@/,""),o=t.replace(/-/g,"_").toUpperCase()+"_RULE",o in r)return"@"+t;for(var a=0;i>a;a++){var s=prefixes[a],c=s.toUpperCase()+"_"+o;if(c in r)return"@-"+s.toLowerCase()+"-"+t}return!1};w.atRule=S;var B=w.prefixed=function(e,t,n){return 0===e.indexOf("@")?S(e):(-1!=e.indexOf("-")&&(e=u(e)),t?p(e,t,n):p(e,"pfx"))};v.addTest("requestanimationframe",!!B("requestAnimationFrame",e),{aliases:["raf"]}),w.testAllProps=h,v.addTest("cssanimations",h("animationName","a",!0)),v.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&h("transform","scale(1)",!0)}),v.addTest("localstorage",function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}}),i(),delete w.addTest,delete w.addAsyncTest;for(var z=0;z<v._q.length;z++)v._q[z]();e.Modernizr=v}(window,document),function(e,t,n){function o(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function i(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return u[e.which]?u[e.which]:f[e.which]?f[e.which]:String.fromCharCode(e.which).toLowerCase()}function r(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function a(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function s(e,t){var n,o,i,r=[];for(n=e,"+"===n?n=["+"]:(n=n.replace(/\+{2}/g,"+plus"),n=n.split("+")),i=0;i<n.length;++i)o=n[i],g[o]&&(o=g[o]),t&&"keypress"!=t&&m[o]&&(o=m[o],r.push("shift")),a(o)&&r.push(o);if(n=o,i=t,!i){if(!d){d={};for(var s in u)95<s&&112>s||u.hasOwnProperty(s)&&(d[u[s]]=s)}i=d[n]?"keydown":"keypress"}return"keypress"==i&&r.length&&(i="keydown"),{key:o,modifiers:r,action:i}}function c(e,n){return null!==e&&e!==t&&(e===n||c(e.parentNode,n))}function l(e){function n(e){e=e||{};var t,n=!1;for(t in h)e[t]?n=!0:h[t]=0;n||(v=!1)}function c(e,t,n,o,i,r){var s,c,l=[],d=n.type;if(!g._callbacks[e])return[];for("keyup"==d&&a(e)&&(t=[e]),s=0;s<g._callbacks[e].length;++s)if(c=g._callbacks[e][s],(o||!c.seq||h[c.seq]==c.level)&&d==c.action){var u;(u="keypress"==d&&!n.metaKey&&!n.ctrlKey)||(u=c.modifiers,u=t.sort().join(",")===u.sort().join(",")),u&&(u=o&&c.seq==o&&c.level==r,(!o&&c.combo==i||u)&&g._callbacks[e].splice(s,1),l.push(c))}return l}function d(e,t,n,o){g.stopCallback(t,t.target||t.srcElement,n,o)||!1!==e(t,n)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function u(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=i(e);t&&("keyup"==e.type&&y===t?y=!1:g.handleKey(t,r(e),e))}function f(e,t,o,r){function a(t){return function(){v=t,++h[e],clearTimeout(p),p=setTimeout(n,1e3)}}function c(t){d(o,t,e),"keyup"!==r&&(y=i(t)),setTimeout(n,10)}for(var l=h[e]=0;l<t.length;++l){var u=l+1===t.length?c:a(r||s(t[l+1]).action);m(t[l],u,r,e,l)}}function m(e,t,n,o,i){g._directMap[e+":"+n]=t,e=e.replace(/\s+/g," ");var r=e.split(" ");1<r.length?f(e,r,t,n):(n=s(e,n),g._callbacks[n.key]=g._callbacks[n.key]||[],c(n.key,n.modifiers,{type:n.action},o,e,i),g._callbacks[n.key][o?"unshift":"push"]({callback:t,modifiers:n.modifiers,action:n.action,seq:o,level:i,combo:e}))}var g=this;if(e=e||t,!(g instanceof l))return new l(e);g.target=e,g._callbacks={},g._directMap={};var p,h={},y=!1,w=!1,v=!1;g._handleKey=function(e,t,o){var i,r=c(e,t,o);t={};var s=0,l=!1;for(i=0;i<r.length;++i)r[i].seq&&(s=Math.max(s,r[i].level));for(i=0;i<r.length;++i)r[i].seq?r[i].level==s&&(l=!0,t[r[i].seq]=1,d(r[i].callback,o,r[i].combo,r[i].seq)):l||d(r[i].callback,o,r[i].combo);r="keypress"==o.type&&w,o.type!=v||a(e)||r||n(t),w=l&&"keydown"==o.type},g._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)m(e[o],t,n)},o(e,"keypress",u),o(e,"keydown",u),o(e,"keyup",u)}if(e){var d,u={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},f={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},m={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},g={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(n=1;20>n;++n)u[111+n]="f"+n;for(n=0;9>=n;++n)u[n+96]=n;l.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},l.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},l.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},l.prototype.reset=function(){return this._callbacks={},this._directMap={},this},l.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap ")||c(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},l.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},l.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(u[t]=e[t]);d=null},l.init=function(){var e,n=l(t);for(e in n)"_"!==e.charAt(0)&&(l[e]=function(e){return function(){return n[e].apply(n,arguments)}}(e))},l.init(),e.Mousetrap=l,"undefined"!=typeof module&&module.exports&&(module.exports=l),"function"==typeof define&&define.amd&&define(function(){return l})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),window.config={cdnBase:"http://take-b1nzy-to-space-assets.deansheather.netdna-cdn.com/",step:100,celestialSpeed:4e3,initialStarsCount:180,inititalCelestialBodies:20,initialEyes:0,meew0Mode:!0,meew0ModeEyesPerLevel:8,visualizer:!0,lightTheme:!1,celestialBodies:["nebula.png","ring_thing.png","b2nzy.png","clock.png","moon.png","jake.png","b1nzy-hands.png","AAAAAAAAAAAAAAH.png","cromulon.png","nebula2.png","satelite.png"],audio:!0,audioFiles:[["Alliance - The Speed Of Light","https://www.youtube.com/watch?v=Z8c8MSNk4BY"],["Approaching Nirvana & Big Giant Circles - Reboot","https://www.youtube.com/watch?v=JgXIQwHZ8-0"],["Big Giant Circles - Go For Distance","https://www.youtube.com/watch?v=RF1rFSoN3JQ"],["Danny Baranowsky - Moonsong","https://www.youtube.com/watch?v=MtkECyiRExE"],["Dunderpatrullen - To The Moon","https://www.youtube.com/watch?v=YFMLHCMc91c"],["Graviton Flux - Singularity","https://soundcloud.com/graviton-flux/singularity"],["Hans Zimmer - Time (Aviators Remix)","https://www.youtube.com/watch?v=kfMQcUTtzKg"],["Iseeicy - TIME","https://www.youtube.com/watch?v=nw2qiR6f05Q"],["Kai Engel - The Flames of Rome","https://www.youtube.com/watch?v=Ck-ZYR-etgI"],["NOMA - Brain Power","https://www.youtube.com/watch?v=mj-v6zCnEaw"],["Renard - Send It To The Moon","https://www.youtube.com/watch?v=J0vUBlcGelI"],["Teo Wei Yong - Divided Singularity","https://www.youtube.com/watch?v=kvJYs14j0bg"]],loadingQuotes:["To the moon!","Beep. Boop.","Letting the bass kick.","Adding a ratelimit to meme creation.","Spinning all day, 'erryday.","HI MOM ITS ANDREI!!!!!!!","I'll ratelimit you."]},Logger.time("init"),Modernizr.localstorage?localStorage.getItem("debug")&&(Logger.useDefaults(),config.cdnBase="",Logger.info("[Logger] Enabled logging.")):(Logger.useDefaults(),Logger.info("[Logger] Enabled logging."));for(var modernizrTests=["audio","canvas","requestanimationframe","cssanimations","csstransforms"],i=0;i<modernizrTests.length;i++){if(!Modernizr[modernizrTests[i]])throw Logger.error("[Modernizr] Browser does not support required browser feature "+modernizrTests[i]+"."),new Error("Unsupported browser.");Logger.info("[Modernizr] Browser supports required browser feature "+modernizrTests[i]+".")}document.getElementById("loading-text").innerText=config.loadingQuotes[Math.floor(Math.random()*config.loadingQuotes.length)],document.documentElement.className=document.documentElement.className.replace(/(?:^|\s)unsupported-browser(?!\S)/g,""),document.documentElement.className+=" supported-browser",Logger.info("[Modernizr] Set the browser status to supported.");for(var url=document.URL,request={},pairs=url.substring(url.indexOf("?")+1).split("&"),i=0;i<pairs.length;i++)if(pairs[i]){var pair=pairs[i].split("=");request[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1])}window.query=request,config.meew0Mode||(document.getElementById("meew-mode-button").style.display="none",Logger.info("[Config] Disabled meew0 mode.")),config.visualizer||(document.getElementById("visualizer").style.display="none",Logger.info("[Config] Disabled visualizer.")),config.audio?window.ac=new AudioContext:(document.getElementById("audio-info").style.display="none",document.getElementById("skippable").style.display="none",Logger.info("[Config] Disabled audio.")),config.lightTheme&&(document.getElementsByTagName("body")[0].className+=" light-theme",Logger.info("[Config] Enabled light theme."));var canvas=document.getElementById("space-backdrop");window.backdrop={canvas:canvas,ctx:canvas.getContext("2d")},window.initalTime=(new Date).getTime(),setInterval(updateTimer,10),document.getElementById("tweet-intent").onclick=tweet;var CelestialBody=function(e){this.img=e,this.reconfig()};CelestialBody.prototype.reconfig=function(){var e=getDimensions();this.x=Math.round(Math.random()*(e.w+50))-50,this.y=-200,this.depth=Math.random(),this.trans=Math.random(),this.trans=this.trans>.5?this.trans:.5},CelestialBody.prototype.render=function(e){var t=getDimensions(),n=config.celestialSpeed/config.step*this.depth,o=(config.celestialSpeed>200?200:config.celestialSpeed)*this.depth;o=o<50?50:o,e.globalAlpha=this.trans,e.drawImage(this.img,this.x,this.y,o,this.img.height/this.img.width*o),e.globalAlpha=1,this.y=this.y+n,this.y>t.h&&this.reconfig()};var Star=function(){this.reconfig()};Star.prototype.reconfig=function(){var e=getDimensions();this.x=Math.round(Math.random()*e.w),this.y=-200,this.depth=Math.random()},Star.prototype.render=function(e){var t=getDimensions(),n=config.celestialSpeed/config.step*this.depth,o=(config.celestialSpeed>500?500:config.celestialSpeed)*this.depth;e.beginPath(),e.moveTo(this.x,this.y),e.lineTo(this.x,this.y+o),e.strokeStyle=config.lightTheme?"#010916":"#fff",e.lineCap="round",e.lineWidth=3*this.depth,e.stroke(),this.y=this.y+n,this.y>t.h&&this.reconfig()},"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var getDimensions=function(){var e,t;return"number"==typeof window.innerWidth?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),{w:e,h:t}},resize=function(){var e=getDimensions();canvas.setAttribute("width",e.w),canvas.setAttribute("height",e.h),Logger.info("[Backdrop] Resized the canvas to fit the viewport.")};window.addEventListener("resize",resize),resize(),window.celestials=[],r(draw),window.meew0Mode={count:0,blocked:!1,askedBlock:!1};var meewButton=document.getElementById("meew-mode-button"),eyes=new Image;eyes.src=config.cdnBase+"assets/img/eyes.png",meewButton.onclick=incrementMeew0Mode,Mousetrap.bind("m",incrementMeew0Mode),Mousetrap.bind("l",function(){config.lightTheme?(document.body.className="",config.lightTheme=!1,Logger.info("[meew0 mode] Disabled light theme.")):(document.body.className+="light-theme",config.lightTheme=!0,Logger.info("[meew0 mode] Enabled light theme."))}),config.visualizer&&config.audio&&(window.visualizer={toggled:!1,analyser:ac.createAnalyser()},visualizer.analyser.connect(ac.destination),visualizer.analyser.fftSize=2048,document.getElementById("visualizer-toggle").onclick=toggleVisualiser,Mousetrap.bind("v",toggleVisualiser),query.hasOwnProperty("visualizer")&&setTimeout(function(){visualizer.toggled=!0,renderVisualizer()},2e3)),config.audio&&r(function(){function e(){if(!r){var n=config.audioFiles[Math.floor(Math.random()*config.audioFiles.length)];if(i===n)return e();Logger.info("[Player] Changing song..."),t(n)}}function t(t){r=!0,i=t,window.audioSrc&&audioSrc.stop(),o.innerText="nothing, yet!",o.setAttribute("href","javascript:void(0)"),n((config.cdnBase+"assets/music/"+t[0]+".mp3").replace(/\s/g,"%20"),function(n){window.audioSrc&&audioSrc.stop(),window.audioSrc=ac.createBufferSource(),audioSrc.connect(ac.destination),audioSrc.connect(visualizer.analyser),audioSrc.buffer=n,audioSrc.addEventListener("ended",e),audioSrc.start(0),r=!1,o.innerText=t[0],o.setAttribute("href",t[1]),Logger.info("[Player] Started playing "+t[0]+".")})}function n(e,t){if(a.hasOwnProperty(e))return t(a[e]);var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.addEventListener("load",function(){ac.decodeAudioData(n.response,function(n){a[e]=n,t(n)})},!1),n.send()}var o=document.getElementById("song"),i=null,r=!1,a={};return document.getElementById("skip-song").onclick=e,Mousetrap.bind("s",e),query.hasOwnProperty("song")&&config.audioFiles[query.song]?(Logger.info("[Player] Playing song from query string."),t(config.audioFiles[query.song])):void e()});